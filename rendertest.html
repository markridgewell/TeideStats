<!DOCTYPE html>
<html>

<body>
<h1>Hello!</h1>
<div id="div">
</div>

<script type="module">

import { request } from "https://esm.sh/@octokit/request";

function elem(type, text) {
    var elem = document.createElement(type);
    elem.appendChild(text);
    return elem;
}

function p(text) {
    return elem('p', document.createTextNode(text));
}

function a(text, href) {
    const a = elem('a', document.createTextNode(text));
    a.href = href;
    return a;
}

request('GET /repos/{owner}/{repo}/actions/artifacts', {
  owner: 'markridgewell',
  repo: 'Teide',
  headers: {
    'X-GitHub-Api-Version': '2022-11-28'
  }
}).then(response => {
    console.log(response);
    const div = document.getElementById("div");
    div.appendChild(p(`${response.data.artifacts.length} artifacts found`));
    const list = document.createElement('ol');
    for (const artifact of response.data.artifacts) {
        list.appendChild(elem('li', a(artifact.name, artifact.archive_download_url)));
    }
    div.appendChild(list);
});
</script>

</body>
</html>
